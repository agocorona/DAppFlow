

how to start cardano-node https://developers.cardano.org/docs/get-started/running-cardano/







start cardano-node
docker run --name=relay -p 3001:3001  -v node-ipc:/opt/cardano/ipc cardano1 run --topology  /opt/cardano/conf/testnet-topology.json --port 3001 --config /opt/cardano/conf/testnet-config.json --database-path /opt/cardano/data 


https://cardano-foundation.gitbook.io/stake-pool-course/stake-pool-guide/stake-pool-operations/keys_and_addresses

generate keys
docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli address key-gen  --verification-key-file /tmp/sal/payment.vkey  --signing-key-file /tmp/sal/payment.skey

payment address
docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli address build  --payment-verification-key-file /tmp/sal/payment.vkey  --out-file /tmp/sal/payment.addr  --testnet-magic 1097911063

Address Balance
docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli query utxo  --address addr_test1vpxjkn9acy564yp2nefw7fys3lvs2ppx8nrwl7cnwxvjfyqlacvw3 --testnet-magic 1097911063


https://cardano-foundation.gitbook.io/stake-pool-course/lessons/lesson-2/faucet


Creating a transaction

Second set of keys
docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli address key-gen  --verification-key-file /tmp/sal/payment2.vkey  --signing-key-file /tmp/sal/payment2.skey

second address

docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli address build  --payment-verification-key-file /tmp/sal/payment2.vkey  --out-file /tmp/sal/payment2.addr  --testnet-magic 1097911063


protocol parameteres:
docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli query protocol-parameters  --testnet-magic 1097911063 > protocol-parameters.json


draft transaction
docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli transaction build-raw --tx-in "5b3185bcd8662700cd2ef9c4ba98d3f663feb7cd72f63172fa35eabe96fd45da#0" --tx-out "addr_test1vpwvjn982sgagc4pf05zax8fsdcw3ndkk6epp30hnyvlrkst57ahu+100000000" --tx-out "addr_test1vpxjkn9acy564yp2nefw7fys3lvs2ppx8nrwl7cnwxvjfyqlacvw3+0" --ttl 0 --fee 0 --out-file /tmp/sal/tx.raw


calculate fee
docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli transaction calculate-min-fee --tx-body-file /tmp/sal/tx.raw --tx-in-count 1 --tx-out-count 2 --witness-count 1 --byron-witness-count 0 --protocol-params-file /tmp/sal/protocol-parameters.json --testnet-magic 1097911063

174433 Lovelace

expr 1000000000 - 100000000 - 174433= 899825567


find tip
docker run -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli query tip  --testnet-magic 1097911063

"slot": 42169715,


create transaction
docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli transaction build-raw --tx-in "5b3185bcd8662700cd2ef9c4ba98d3f663feb7cd72f63172fa35eabe96fd45da#0" --tx-out "addr_test1vpwvjn982sgagc4pf05zax8fsdcw3ndkk6epp30hnyvlrkst57ahu+100000000" --tx-out "addr_test1vpxjkn9acy564yp2nefw7fys3lvs2ppx8nrwl7cnwxvjfyqlacvw3+899825567" --ttl  42169915 --fee 174433 --out-file /tmp/sal/tx.raw


sign the transaction
docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli transaction sign --tx-body-file /tmp/sal/tx.raw --signing-key-file /tmp/sal/payment.skey --testnet-magic 1097911063 --out-file /tmp/sal/tx.signed

submit it
docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli transaction submit --tx-file /tmp/sal/tx.signed --testnet-magic 1097911063


address balance destination account
docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli query utxo  --address addr_test1vpwvjn982sgagc4pf05zax8fsdcw3ndkk6epp30hnyvlrkst57ahu --testnet-magic 1097911063


https://github.com/input-output-hk/Alonzo-testnet/blob/main/Alonzo-solutions/exercise3/e3SampleSolution.md

part 2

 docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli transaction hash-script-data --script-data-value 96 > /tmp/sal/random_datum_hash.txt


 docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli address build --payment-script-file /tmp/sal/AlwaysSucceeds.plutus --testnet-magic 1097911063 --out-file /tmp/sal/script.addr


docker run  -v %cd%:/tmp/sal -v node-ipc:/opt/cardano/ipc inputoutput/cardano-node cli transaction build  --alonzo-era --tx-in ${ADDR2}  --tx-out $(cat script.addr)+10000000000 --tx-out-datum-hash $(cat random_datum_hash.txt) --change-address $(cat payment2.addr)  ${MAGIC}  --protocol-params-file protocol-parameters.json  --out-file tx.raw